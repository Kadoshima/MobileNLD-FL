# Q15固定小数点演算

## 概要
Q15は16ビット固定小数点形式で、1ビットを符号、15ビットを小数部に使用する。-1.0から0.999...の範囲を表現できる。

## 基本概念

### Q15フォーマット
- **ビット構成**: S.FFFFFFFFFFFFFFF（S=符号ビット、F=小数ビット）
- **表現範囲**: -1.0 ≤ x < 1.0
- **分解能**: 2^-15 ≈ 0.000030517578125
- **Int16型で実装**: -32768 〜 32767

### 変換式
```
Float → Q15: Q15_value = round(float_value × 2^15)
Q15 → Float: float_value = Q15_value / 2^15
```

## 演算における注意点

### 乗算時のオーバーフロー
Q15 × Q15の結果は最大で2^30になる可能性があるため、Int32以上の型で計算後、15ビット右シフトが必要。

```swift
let result = (Int32(a) * Int32(b)) >> 15
```

### 飽和演算
オーバーフロー/アンダーフロー時は最大/最小値でクリップする。

## なぜモバイルで重要か
1. **高速性**: 整数演算はFPUより高速
2. **省電力**: 浮動小数点演算より消費電力が低い
3. **予測可能性**: 固定精度で数値誤差が予測可能
4. **SIMD親和性**: 整数SIMDは効率的

## 実装での使用例
- Lyapunov指数計算での距離計算
- DFAでの累積和計算
- 位相空間再構成での埋め込みベクトル