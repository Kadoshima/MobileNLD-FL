# EdgeHAR最適化実装ガイド（IEICE ComEX向け）

## 🎯 最重要ポイント

### 投稿先変更
- **旧**: IEICE Transactions Letter（2025年1月締切）
- **新**: **IEICE Communications Express (ComEX)**（2025年9月投稿、随時受付）
- **採択率見込み**: 40-60%（公表46-56% + テーマ適合性）

### 主要指標の変更
- **最優先**: **mJ/判定**（消費電流×電圧×時間/判定回数）
- 3台総和と最小バッテリー端末単体の両方を明記
- USB電流計での実測でOK

## 📊 必須の図表（4ページに収める）

### 図1枚のみ
**エネルギー-精度-レイテンシのPareto曲線**
- X軸: mJ/判定
- Y軸: 8クラス精度(%)
- 系列: p99レイテンシ別
- 比較: 提案手法 / 静的割当 / スマホ単独 / M5単独

### 表1枚のみ
**BLE通信パラメータと測定条件**
| パラメータ | 実測値 | 備考 |
|----------|--------|------|
| ATT_MTU | 185バイト | iOS実測 |
| 接続間隔 | 15-20ms | 最小設定時 |
| 通知サイズ | 20-50バイト | 特徴量のみ |
| サンプリング | 50Hz | 窓幅2秒 |

## 🚀 実装の簡略化

### 1. 負荷分散アルゴリズム
```python
# 訪欲法で十分
def assign_task(devices):
    return max(devices, key=lambda d: d.battery)
    
# 再割当は1-2秒周期
# ヒステリシス（10%閾値）で振動防止
```

### 2. BLE通信
- **Raw IMUデータは送らない**
- **特徴量のみ送信**（6軸統計量20-50バイト）
- ATT_MTUと接続間隔の実測値を明記

### 3. 階層ゲーティング
- 2クラス（Active/Idle）→ 8クラス詳細
- 常時8クラスとの比較でmJ/判定削減を示す

## 🧪 実験最小セット

### 必須実験（これだけ）
1. **比較条件**（各5分×3回）
   - 提案手法（動的＋階層）
   - 静的割当
   - スマホ単独
   - M5Stack単独

2. **アブレーション**（ON/OFF切替のみ）
   - 動的割当 ON/OFF
   - 階層ゲート ON/OFF

### データセット
- **メイン**: 独自データ（M5Stack装着3-5人×8動作×100）
- **サブ**: UCI HAR（ベースラインのみ、再学習前提）

## 📝 論文構成（4ページ厳守）

### セクション配分
1. **Introduction** (0.5p)
   - battery-aware, multi-edge, hierarchical, <100ms を強調

2. **Related Work** (0.3p)
   - 3本のみ引用（TinyML HAR、省電力HAR、階層推論）

3. **Proposed Method** (1.2p)
   - アーキテクチャ図
   - 簡潔なアルゴリズム
   - BLE最適化

4. **Experiments** (1.5p)
   - 図1: Pareto曲線
   - 表1: BLE実測値
   - アブレーション結果（文章埋め込み）

5. **Conclusion** (0.5p)

## ⚡ クイックスタートチェックリスト

### Week 1: 基本実装
- [ ] BLE通信確立（特徴量のみ）
- [ ] TFLite Micro（2クラス・8クラス）
- [ ] 簡単な負荷分散（訪欲法）

### Week 2: 実験
- [ ] mJ/判定測定（USB電流計）
- [ ] p50/p99レイテンシ測定
- [ ] 独自データ収集（3人最小）

### Week 3: 論文
- [ ] Pareto曲線作成
- [ ] BLE実測表作成
- [ ] 4ページに収める

## 🎯 成功の鍵

### やること
- ✅ mJ/判定を主要指標に
- ✅ BLE実測値（ATT_MTU、接続間隔）明記
- ✅ 特徴量のみ送信
- ✅ アブレーション2本（ON/OFF）
- ✅ 図1・表1に絞る

### やらないこと
- ❌ 複雑な最適化アルゴリズム
- ❌ Raw IMUデータの送信
- ❌ 過度なBLE最適化
- ❌ 多数の図表
- ❌ 長い関連研究

## 📅 スケジュール

### 現在〜2025年3月
- 基本実装と予備実験
- プロトタイプ完成

### 2025年4月〜6月
- 本実験とデータ収集
- 結果分析

### 2025年7月〜8月
- 論文執筆
- 内部レビュー

### 2025年9月
- **ComEX投稿**

## 🔍 レビュアー対策

### 想定質問と回答
1. **「総エネルギーか端末寿命か？」**
   → 両方提示（3台総和＋最小バッテリー端末）

2. **「BLE遅延で100ms切れる？」**
   → 特徴量送信＋実測パラメータでp99<100ms達成

3. **「UCIの汎化性は？」**
   → 独自データメイン、UCI再学習ベースライン

## 📚 必須引用（3本のみ）

1. Zhou et al., Sci. Rep., 2025 - TinyML HAR
2. Contoli et al., Pervasive Mobile Comput., 2024 - 省電力HAR
3. Dentamaro et al., Expert Syst. Appl., 2024 - 階層推論

---
*Created: 2024-12-10*  
*Target: IEICE ComEX (September 2025)*  
*Focus: Minimal implementation with mJ/decision metric*